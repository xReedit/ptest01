<dom-module id="x-comp-ctrl-add-fast">
    <template>
        <style>
            .container {
                display: flex;
                justify-content: center;
                align-items: center;
                background-color: #f2f2f2;
                border-radius: 5px;                
            }
            .increment, .decrement {
                transition: background-color 0.3s ease;
                cursor: pointer;                
                font-size: 25px;
                font-weight: 600;
                padding: 1px 10px 3px;                
                color: white;
                border-radius: 5px;
                opacity: 0.8;
            }

            .decrement:hover {
                opacity: 1;
            }
            .increment:hover {
                opacity: 1;
            }

            .xdisabled {
                background: #ccc !important;
            }
            
            .quantity {
                color: #333;                
                padding: 5px;
                font-size: 16px;
                font-weight: 600;
            }
        </style>
        <div class="container">
            <template is="dom-if" if="[[quantity]]">
                <div class="decrement bg-dark" on-click="decrement">-</div>
                <span class="quantity">[[quantity]]</span>
            </template>
            <div class="increment bg-primary" on-click="increment">+</div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'x-comp-ctrl-add-fast',
            properties: {
                quantity: {
                    type: Number,
                    value: 0,
                    notify: true,
                    observer: '_quantityChanged'
                },
                iditem_subitem_content: {
                    type: Number,
                    value: 0
                },
                maxQuantity: {
                    type: Number,
                    value: Infinity // valor por defecto ilimitado
                },                           
                reset: {
                    type: Boolean,
                    observer: '_resetChanged'
                },
                isIncrementDisabled: {
                    type: Boolean,
                    value: false
                },
                subitem: {
                    type: Object,
                    value: {}
                },
                descripcion_item_ini: {
                    type: String,
                    value: ''
                },
            },
            increment: function () {
                // this.quantity++;
                if (!this.isIncrementDisabled) {
                    this.quantity++;
                    this.totalQuantity++;
                    this.fire('chagecount', {
                        iditem_subitem_content: this.iditem_subitem_content,                        
                        quantity: this.quantity,
                        maxQuantity: this.maxQuantity,                        
                        subitem: this.subitem,
                        descripcion_item_ini: this.descripcion_item_ini
                    });
                }

              
            },
            decrement: function () {
                if (this.quantity > 0) {
                    this.quantity--;
                    this.totalQuantity--;
                }

                this.fire('chagecount', {
                    iditem_subitem_content: this.iditem_subitem_content,                    
                    quantity: this.quantity,
                    maxQuantity: this.maxQuantity,                    
                    subitem: this.subitem,
                    descripcion_item_ini: this.descripcion_item_ini
                });
            },
            _resetChanged: function (newVal, oldVal) {
                if (newVal) {
                    this.resetQuantity();
                }
            },
            resetQuantity: function () {
                this.quantity = 0;
                this.totalQuantity = 0;
                this.enableIncrementButton();

                // remove class xdisabled
                this.$$('.increment').classList.remove('xdisabled');

            },
            reset: function () {
                this.resetQuantity();
            },
            _quantityChanged: function (newVal, oldVal) {     
 
            },
            enableIncrementButton: function () {                
                this.isIncrementDisabled = false;
            },
            disableIncrementButton: function () {                
                this.isIncrementDisabled = true;                                
            }
        });
    </script>
</dom-module>