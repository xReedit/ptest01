<dom-module id="x-comp-find-seccion">
    <template>
        <div>
            <!-- <input type="text" class$="[[clasecss]]" class="xMiInput xPasarEnter2 fs-12" onChange="conMayusculas(this)" id="des_seccion_carta" onkeyup="xloadSeccionCarta(this)"> -->
            <select id="compFindListSeccion" class$="[[clasecss]]" on-change="selectOptionSeccion">
                <template is="dom-repeat" items="{{dtSeccionCarta}}" as="item">
                    <option value="[[index]]">[[item.descripcion]]</option>
                </template>
            </select>
        </div>
    </template>

    <script>
        Polymer({
            is: 'x-comp-find-seccion',
            properties: {
                dtSeccionCarta: {
                    type: Array,
                    value: function () {
                        return [];
                    },
                    notify: true
                },
                valueInput: String,
                clasecss: String,
                seccion: {
                    type: Object,
                    reflectToAttribute: true,
                    notify: true,
                    value: function () {
                        return {};
                    },
                    observer: 'seccionNameChanged'
                }
            },
            seccionNameChanged: function (seccion) {
                return seccion;
            },
            getSeccion: function () {
                return this.seccion;
            },
            attached: function () {
                this.xloadSeccionCarta();
            },
            xloadSeccionCarta: function () {
                this.clasecss = this.clasecss === '' ? 'xTextRow2 xCursor' : this.clasecss;

                $.ajax({
                    type: 'POST',
                    url: '../../bdphp/log_componentes.php?op=2002'
                }).done(function (DtItems) {
                    var xDtSecCarta = JSON.parse(DtItems);
                    this.dtSeccionCarta = xDtSecCarta.datos;
                    // selecciona el primero
                    try {
                        this.seccion = this.dtSeccionCarta[0];
                    } catch (error) {
                        this.seccion = {};
                    }
                    this.dtSeccionCarta = JSON.parse(JSON.stringify(this.dtSeccionCarta));
                    console.log('this.dtSeccionCarta', this.dtSeccionCarta);
                }.bind(this));
            },
            selectOptionSeccion: function () {
                const index = this.$.compFindListSeccion.selectedIndex;
                this.seccion = this.dtSeccionCarta[index];
                this.fire('selected', this.seccion);
            },
            getelementSeletedAlmacen: function () {
                return this.elementSeleted;
            },
            resetText: function () {
                this.$.des_seccion_carta.value = '';
                this.elementSeleted = null;
            },
            focusText: function () {
                this.$.des_seccion_carta.focus();
            }
        });
    </script>
</dom-module>