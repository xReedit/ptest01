<dom-module id="x-promociones">    
    <template>
        <br>
        <div class="xMiCard xradius" style="width:85%; max-width: 1100px;">
			<div class="xEncanezadoCard" style="background: lavenderblush; color: #424242;">
                <div class="d-flexx justify-content-between align-items-center">
                    <p class="fs-18">Ofertas. Promociones. Descuentos</p>                    
                </div>                
            </div>	
            <div class="xContentCard" style="padding: 20px;">            
                <div class="w-100">
                    <p class="fs-18">Nueva Promo</p>
                    <hr>
                    <br>
                    <div class="conent-grid-two">                        
                        <div class="div-child">
                            <p class="fw-600">Tipo</p>
                            <select id="select_promo" class="selected-template-1 w-100">
                                <template is="dom-repeat" items="{{listPromos}}" as="item" onchange="selectOptionPromo()">
                                    <option value="[[index]]">[[item.titulo]] </option>
                                </template>
                            </select>
                            <br>
                            <div>                                
                                <p class="text-secondary"> {{ promoSeleted.descripcion }} </p>
                            </div>

                            <br>
                            <div class="xLinea2"></div>
                            <br><br>

                            <div>
                                <p class="fw-600">Titulo</p>
                                <input type="text" class="selected-template-1 w-100" placeholder="Titulo" onChange="conMayusculas(this)">
                            </div>

                        </div>
                        <div class="div-child">
                            <p class="text-secondary fs-16">Parametros</p>
                            <br>
                            <div>
                                <div>
                                    <p class="fw-600">Dias de la semana</p>
                                    <div style="display: grid;">
                                        <paper-checkbox id="check_dia" class="mr-1" data-id="0">Lunes</paper-checkbox>
                                        <paper-checkbox id="check_dia" class="mr-1" data-id="1">Martes</paper-checkbox>
                                        <paper-checkbox id="check_dia" class="mr-1" data-id="2">Miercoles</paper-checkbox>
                                        <paper-checkbox id="check_dia" class="mr-1" data-id="3">Jueves</paper-checkbox>
                                        <paper-checkbox id="check_dia" class="mr-1" data-id="4">Viernes</paper-checkbox>
                                        <paper-checkbox id="check_dia" class="mr-1" data-id="5">Sabado</paper-checkbox>
                                        <paper-checkbox id="check_dia" class="mr-1" data-id="6">Domingo</paper-checkbox>
                                    </div>
                                </div>    
                                <div class="pt-3">
                                    <p class="fw-600">Fecha de Vigencia</p>
                                    <div class="d-flexx">
                                        <div class="mr-1">
                                            <p class="text-secondary">Fecha de Inicio</p>
                                            <input type="date" class="selected-template-1" id="f_ini">
                                        </div>                                        
                                        <div>
                                            <p class="text-secondary">Fecha de Fin</p>
                                            <input type="date" class="selected-template-1" id="f_fin">
                                        </div>
                                    </div>
                                </div>                            
                                <div class="pt-3">
                                    <p class="fw-600">Hora de Vigencia</p>
                                    <div class="d-flexx">
                                        <div class="mr-1">
                                            <p class="text-secondary">Hora de Inicio</p>
                                            <input type="time" class="selected-template-1" id="h_ini">
                                        </div>                                        
                                        <div>
                                            <p class="text-secondary">Hora de Fin</p>
                                            <input type="time" class="selected-template-1" id="h_fin">
                                        </div>
                                    </div>
                                </div>                            

                                <div class="pt-3">
                                    <p class="fw-600">Cantidad de pedidos</p>
                                    <p class="text-secondary">Si se limita a los primeros x pedidos. Colocar cero (0) si es ílimitado.</p>
                                    <input type="number" class="selected-template-1" placeholder="Titulo" onChange="conMayusculas(this)" value="0">
                                </div>

                                <div class="pt-3">
                                    <p class="fw-600">Importe mínimo de consumo</p>
                                    <p class="text-secondary">Ej: Si el importe total del pedido supera los S/100.00 entonces aplica a la promoción. Colocar cero (0) sino corresponde.</p>
                                    <input type="number" class="selected-template-1" placeholder="Titulo" onChange="conMayusculas(this)" value="0">
                                </div>

                                <div class="pt-3">
                                    <p class="fw-600">Solo por la aplicación</p>
                                    <p class="text-secondary">la promocion solo aplica para los pedidos realizados desde la aplicacion Papaya Expres (Delivery o Mozo Virtual).</p>
                                    <paper-checkbox id="check_solo_app" class="mr-1" data-id="6">Solo App</paper-checkbox>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br><br>
    </template>
</dom-module>
<style>
    .conent-grid-two {
        width: 100%;
        display: grid;
        grid-gap: 1rem;
        margin: 0 auto;
        grid-template-columns: 1fr 1fr;
    }

    .div-child {
        max-width: 300px;
    }
</style>
<script>
    var xThisProm;

    function xIniPromociones() {
        xLoadListaPromocion();
    }

    function xLoadListaPromocion() {
        $.ajax({ type: 'POST', url: '../../bdphp/log_009.php?op=5'})
        .done(res => {
            const _listPromos = JSON.parse(res).datos;
            xThisProm.listPromos = _listPromos;
            console.log('xThisProm.listPromos', xThisProm.listPromos);
            selectOptionPromoIni();
        });
    }

    function selectOptionPromoIni() {
        xThisProm.promoSeleted = xThisProm.listPromos[0]; 
    }

    function selectOptionPromo() {
        const _index = xThisProm.$.select_promo.value;
        xThisProm.promoSeleted = xThisProm.listPromos[_index]; 
    }

    Polymer({
        is:'x-promociones',
        properties:{
            listPromos: [],
            promoSeleted: []
        },
        attached:function(){
            xThisProm=this;
            xIniPromociones();
        }
    })
</script>